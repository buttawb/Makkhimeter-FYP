{% extends "base/head.html" %}
{% load custom_filters %}
{% block content %}

    <section class="right-image">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <div class="container">
                        <div class="horizontal">
                            <div class="verticals ten offset-by-one">

                                <ol class="breadcrumb breadcrumb-fill2">
                                    <li><a href="/"><i class="fa fa-home"></i></a></li>
                                    <li><a href="/eye_col">Eye Colour</a></li>
                                    <li><a> / </a></li>
                                    <li><a href="/col2">Input</a></li>
                                    <li><a> / </a></li>
                                    <li class="active">Results</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="left-content">
                        <br>
                        <br>
                        <h2>Eye Colour</h2>
                        <br><br>
                        <p>
                            <img src="{{ img }}">
                        </p>
                        <br>
                        <br>
                        <h2> Dominant Colour: <em style="color: rebeccapurple"> {{ main }} </em></h2>


                    </div>

                </div>


                <div class="col-md-6">

                    <br>
                    <br>
                    <br>
                    <br>
                    <div class="card-body">
                        <h5 class="card-title">Main colours </h5>

                        <!-- Pie Chart -->
                        <div id="pieChart"
                             style="min-height: 450px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); position: relative;"
                             class="echart" _echarts_instance_="ec_1679850190663">
                            <div style="position: relative; width: 467px; height: 400px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;">
                                <canvas data-zr-dom-id="zr_0" width="700" height="600"
                                        style="position: absolute; left: 0px; top: 0px; width: 467px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas>
                            </div>
                            <div class=""
                                 style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; box-shadow: rgba(0, 0, 0, 0.2) 1px 2px 10px; transition: opacity 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, transform 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s; background-color: rgb(255, 255, 255); border-width: 1px; border-radius: 4px; color: rgb(102, 102, 102); font: 14px / 21px &quot;Microsoft YaHei&quot;; padding: 10px; top: 0px; left: 0px; transform: translate3d(181px, 199px, 0px); border-color: rgb(84, 112, 198); pointer-events: none; visibility: hidden; opacity: 0;">
                                <div style="margin: 0px 0 0;line-height:1;">
                                    <div style="font-size:14px;color:#666;font-weight:400;line-height:1;">Access From
                                    </div>
                                    <div style="margin: 10px 0 0;line-height:1;">
                                        <div style="margin: 0px 0 0;line-height:1;"><span
                                                style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#5470c6;"></span><span
                                                style="font-size:14px;color:#666;font-weight:400;margin-left:2px">Search Engine</span><span
                                                style="float:right;margin-left:20px;font-size:14px;color:#666;font-weight:900">1,048</span>
                                            <div style="clear:both"></div>
                                        </div>
                                        <div style="clear:both"></div>
                                    </div>
                                    <div style="clear:both"></div>
                                </div>
                            </div>
                        </div>

                        <script>
                            // Convert the data dictionary to JSON format
                            const data = JSON.parse('{{ data|safe }}');

                            // Extract the data from the JSON object
                            const labels = data.labels;
                            const values = data.values;
                            const colors = data.colors;

                            document.addEventListener("DOMContentLoaded", () => {
                                echarts.init(document.querySelector("#pieChart")).setOption({
                                    title: {
                                        text: 'Colour Distribution',
                                        subtext: 'Usually four (4)',
                                        left: 'center'
                                    },
                                    tooltip: {
                                        trigger: 'item'
                                    },
                                    legend: {
                                        orient: 'vertical',
                                        left: 'left'
                                    },
                                    series: [{
                                        name: '',
                                        type: 'pie',
                                        radius: '60%',
                                        data: [
                                            {
                                                value: values[0],
                                                name: labels[0],
                                                itemStyle: {color: colors[0]} // set the color for this data item
                                            },
                                            {
                                                value: values[1],
                                                name: labels[1],
                                                itemStyle: {color: colors[1]} // set the color for this data item
                                            },
                                            {
                                                value: values[2],
                                                name: labels[2],
                                                itemStyle: {color: colors[2]} // set the color for this data item
                                            },
                                            {
                                                value: values[3],
                                                name: labels[3],
                                                itemStyle: {color: colors[3]} // set the color for this data item
                                            }
                                        ],
                                        emphasis: {
                                            itemStyle: {
                                                shadowBlur: 10,
                                                shadowOffsetX: 0,
                                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                                            }
                                        }
                                    }]
                                });
                            });
                        </script>

                        <!-- End Pie Chart -->

                    </div>
                    {#                    <div class="chart-container">#}
                    {##}
                    {#                        <canvas id="myChart"></canvas>#}
                    {#                    </div>#}

                    <!-- Tables -->


                    {#                    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>#}
                    {#                    <script>#}
                    {#                        var data = {{ data|safe }};#}
                    {#                        var ctx = document.getElementById('myChart').getContext('2d');#}
                    {#                        var myChart = new Chart(ctx, {#}
                    {#                            type: 'pie',#}
                    {#                            data: {#}
                    {#                                labels: data.labels,#}
                    {#                                datasets: [{#}
                    {#                                    data: data.values,#}
                    {#                                    backgroundColor: data.colors,#}
                    {#                                    hoverBackgroundColor: data.colors#}
                    {#                                }]#}
                    {#                            },#}
                    {#                            options: {#}
                    {#                                title: {#}
                    {#                                    display: true,#}
                    {#                                    text: 'Eye Colour'#}
                    {#                                },#}
                    {#                                tooltips: {#}
                    {#                                    callbacks: {#}
                    {#                                        label: function (tooltipItem, data) {#}
                    {#                                            var dataset = data.datasets[tooltipItem.datasetIndex];#}
                    {#                                            var total = dataset.data.reduce(function (previousValue, currentValue, currentIndex, array) {#}
                    {#                                                return previousValue + currentValue;#}
                    {#                                            });#}
                    {#                                            var currentValue = dataset.data[tooltipItem.index];#}
                    {#                                            var percentage = parseFloat((currentValue / total * 100).toFixed(2));#}
                    {#                                            return percentage + '%';#}
                    {#                                        }#}
                    {#                                    }#}
                    {#                                },#}
                    {#                                responsive: true,#}
                    {#                                maintainAspectRatio: false#}
                    {#                            }#}
                    {#                        });#}
                    {#                    </script>#}
                </div>


                <div class="col-md-12">

                    <div class="alternate-table">
                        <table>
                            <thead>
                            <tr>
                                <th>Colour Name</th>
                                <th>Pixel Value</th>
                                <th>Hex Value</th>
                                <th>Percentage</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% if d %}
                                {% for row in d %}
                                    <tr>
                                        <td>{{ row.labels }}</td>
                                        <td>{{ row.values }}</td>
                                        <td>{{ row.colors }}</td>
                                        <td>{{ row.percentages }}%</td>
                                    </tr>
                                {% endfor %}
                            {% endif %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>




{% endblock %}

